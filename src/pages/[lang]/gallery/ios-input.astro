---
import { getCollection } from "astro:content";
import SiteLayout from "../../../layouts/SiteLayout.astro";
import {
  resolveLocale,
  messages,
  SUPPORTED_LOCALES,
} from "../../../i18n/strings";

export function getStaticPaths() {
  return SUPPORTED_LOCALES.map((lang) => ({ params: { lang } }));
}

const { lang } = Astro.params;
const locale = resolveLocale(lang);
const t = messages[locale];

const posts = (
  await getCollection("blog", ({ data }) => data.locale === locale)
).sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
---

<html lang={locale}>
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no"
    />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <title>IOS Input Test</title>
    <meta name="description" content="" />
  </head>
  <body>
    <div class="container">
      <div class="header">
        <button class="close-btn">×</button>
        <div class="avatar"></div>
      </div>

      <div class="content">
        <h1>Input Test</h1>
        <p class="subtitle">测试移动端输入框交互体验</p>
        <p class="subtitle">测试移动端输入框交互体验</p>
        <p class="subtitle">测试移动端输入框交互体验</p>
        <p class="subtitle">测试移动端输入框交互体验</p>
        <p class="subtitle">测试移动端输入框交互体验</p>
        <p class="subtitle">测试移动端输入框交互体验</p>
        <p class="subtitle">测试移动端输入框交互体验</p>

        <div class="form-group">
          <label for="tax-id">Tax ID</label>
          <input id="tax-id" type="text" placeholder="" />
        </div>

        <div class="form-group">
          <label for="email">E-mail</label>
          <input id="email" type="email" placeholder="" />
        </div>

        <div class="form-group">
          <label for="name">Full Name</label>
          <input id="name" type="text" placeholder="" />
        </div>
      </div>

      <button class="continue-btn">Continue</button>
    </div>
  </body>
</html>

<style>
  :root {
    -webkit-touch-callout: none;
  }

  * {
    box-sizing: border-box;
  }

  html {
    overflow: hidden;
  }

  body {
    margin: 0;
    font-family:
      -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue",
      Arial, sans-serif;
    background: #ffffff;
    max-height: 100svh;
  }

  .container {
    max-width: 480px;
    margin: 0 auto;
    position: relative;
    overflow-y: scroll;
    width: 100%;
    height: 100%;
    max-height: 100svh;
  }

  .header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 1.25rem;
    position: sticky;
    background-color: white;
    top: 0;
    left: 0;
    width: 100%;
    transition: box-shadow 0.2s ease;
  }

  @supports (animation-timeline: scroll()) {
    .header {
      animation: header-shadow linear;
      animation-iteration-count: 1;
      animation-timeline: scroll(nearest);
      animation-range: normal;
    }

    @keyframes header-shadow {
      0% {
        box-shadow: 0 0 0 0 rgba(0, 0, 0, 0);
      }
      10%,
      100% {
        box-shadow:
          0 1px 3px 0 rgba(0, 0, 0, 0.1),
          0 1px 2px -1px rgba(0, 0, 0, 0.1);
      }
    }
  }

  .close-btn {
    width: 32px;
    height: 32px;
    border: none;
    background: transparent;
    font-size: 1.75rem;
    line-height: 1;
    cursor: pointer;
    color: #000;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: #e5e7eb;
  }

  .content {
    margin: 0 1.5rem;
    padding: 0 0 3rem;
  }

  .content h1 {
    margin: 0 0 0.5rem 0;
    font-size: 1.75rem;
    font-weight: 700;
    color: #000;
    line-height: 1.2;
  }

  .subtitle {
    margin: 0 0 2rem 0;
    font-size: 0.875rem;
    color: #6b7280;
    line-height: 1.5;
  }

  .form-group {
    margin-bottom: 1rem;
  }

  label {
    display: block;
    font-size: 0.8125rem;
    color: #6b7280;
    margin-bottom: 0.5rem;
    font-weight: 400;
  }

  input {
    width: 100%;
    height: 3rem;
    padding: 0.875rem 1rem;
    border-radius: 0.5rem;
    border: none;
    font-size: 0.9375rem;
    font-family: inherit;
    background: #f3f4f6;
    outline: none;
    transition: background-color 0.15s ease;
  }

  input::placeholder {
    color: #9ca3af;
  }

  input:focus {
    background: #e5e7eb;
  }

  .continue-btn {
    position: fixed;
    bottom: 2rem;
    left: 50%;
    transform: translateX(-50%);
    width: calc(100% - 3rem);
    max-width: 420px;
    padding: 1rem;
    background: #8b9bef;
    color: white;
    font-size: 1rem;
    font-weight: 500;
    border: none;
    border-radius: 0.75rem;
    cursor: pointer;
    transition: opacity 0.15s ease;
  }

  .continue-btn:active {
    opacity: 0.8;
  }

  @media (max-width: 640px) {
    .content h1 {
      font-size: 1.5rem;
    }

    .continue-btn {
      width: calc(100% - 2.5rem);
      bottom: 1.5rem;
    }
  }
</style>
